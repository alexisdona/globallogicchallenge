<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="180px" preserveAspectRatio="none" style="width:1625px;height:180px;background:#FFFFFF;" version="1.1" viewBox="0 0 1625 180" width="1625px" zoomAndPan="magnify"><defs/><g><!--MD5=[d9f75b78703733959770a1bae7362de0]
entity Cliente--><g id="elem_Cliente"><ellipse cx="30" cy="14" fill="#F1F1F1" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M30,22 L30,49 M17,30 L43,30 M30,49 L17,64 M30,49 L43,64 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="48" x="6" y="78.4951">Cliente</text></g><!--MD5=[645d8587175d8f7ad110cd370775931d]
entity API--><g id="elem_API"><path d="M364,23.5 L364,47.5 M364,35.5 L381,35.5 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><ellipse cx="393" cy="35.5" fill="#F1F1F1" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="85" x="342" y="64.4951">api/v1/users</text></g><!--MD5=[131ef957277a2e64bc2c66aab59271f7]
entity UserRepository--><g id="elem_UserRepository"><path d="M1107,128 C1107,118 1170,118 1170,118 C1170,118 1233,118 1233,128 L1233,153.2969 C1233,163.2969 1170,163.2969 1170,163.2969 C1170,163.2969 1107,163.2969 1107,153.2969 L1107,128 " fill="#F1F1F1" style="stroke:#181818;stroke-width:0.5;"/><path d="M1107,128 C1107,138 1170,138 1170,138 C1170,138 1233,138 1233,128 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="106" x="1117" y="154.9951">UserRepository</text></g><!--MD5=[c5f8580ffbf54b53f087910ce15520c0]
entity JWTAuthFilter--><g id="elem_JWTAuthFilter"><ellipse cx="763" cy="35.5" fill="#F1F1F1" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><polygon fill="#181818" points="759,23.5,765,18.5,763,23.5,765,28.5,759,23.5" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="90" x="718" y="64.4951">JWTAuthFilter</text></g><!--MD5=[5ac55f21d0effe116e2164eedd40834d]
entity JWTService--><g id="elem_JWTService"><ellipse cx="1170" cy="34.5" fill="#F1F1F1" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><polygon fill="#181818" points="1166,22.5,1172,17.5,1170,22.5,1172,27.5,1166,22.5" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="75" x="1132.5" y="63.4951">JWTService</text></g><!--MD5=[f3bd64ae14d8008c1d34e97a33ee6346]
entity UserDetailService--><g id="elem_UserDetailService"><ellipse cx="1557.5" cy="132.5" fill="#F1F1F1" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><polygon fill="#181818" points="1553.5,120.5,1559.5,115.5,1557.5,120.5,1559.5,125.5,1553.5,120.5" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="121" x="1497" y="161.4951">UserDetailService</text></g><!--MD5=[87c6e7d1a9390026ded946df06f04e82]
link Cliente to API--><g id="link_Cliente_API"><path d="M54.13,43.5 C111.27,43.5 260,43.5 336.51,43.5 " fill="none" id="Cliente-to-API" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="341.9,43.5,332.9,39.5,336.9,43.5,332.9,47.5,341.9,43.5" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="226" x="85" y="39.5669">Realiza una solicitud a /api/v1/users</text></g><!--MD5=[25cb18e802e0573a6c6c953b5ffd3b1d]
link API to JWTAuthFilter--><g id="link_API_JWTAuthFilter"><path d="M427.23,43.5 C497.16,43.5 637.67,43.5 712.48,43.5 " fill="none" id="API-to-JWTAuthFilter" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="717.76,43.5,708.76,39.5,712.76,43.5,708.76,47.5,717.76,43.5" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136" x="504.5" y="39.5669">Intercepta la solicitud</text></g><!--MD5=[7b3064b9883977283e3856044e0bc322]
link JWTAuthFilter to API--><g id="link_JWTAuthFilter_API"><path d="M717.99,60.97 C708.26,64.1 697.9,66.87 688,68.5 C586.69,85.15 558.22,85.69 457,68.5 C448.84,67.11 440.37,64.9 432.24,62.35 " fill="none" id="JWTAuthFilter-to-API" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="427.22,60.72,434.547,67.3014,431.9761,62.2625,437.015,59.6917,427.22,60.72" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="229" x="458" y="64.5669">Devuelve el resultado de la solicitud</text></g><!--MD5=[5c7586d4a44e69f79ebba034cd6a941b]
link JWTAuthFilter to JWTService--><g id="link_JWTAuthFilter_JWTService"><path d="M808.11,43.39 C886.7,43.2 1049.88,42.79 1126.95,42.6 " fill="none" id="JWTAuthFilter-to-JWTService" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="1132.35,42.59,1123.35,38.59,1127.35,42.59,1123.35,46.59,1132.35,42.59" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="237" x="839" y="39.5669">Solicita el email del usuario del token</text></g><!--MD5=[5e88ccdee2d7e10ad894a0d8521a4a8a]
link JWTService to JWTAuthFilter--><g id="link_JWTService_JWTAuthFilter"><path d="M1132.34,55.36 C1115.68,60.56 1095.58,65.93 1077,68.5 C971.78,83.08 942.82,85.73 838,68.5 C829.8,67.15 821.29,65.02 813.08,62.55 " fill="none" id="JWTService-to-JWTAuthFilter" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="808.01,60.97,815.4316,67.4446,812.788,62.4434,817.7891,59.7998,808.01,60.97" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="187" x="864" y="64.5669">Devuelve el email del usuario</text></g><!--MD5=[cc2419fb4df8cf45d47e86d223e2de8a]
link JWTService to UserRepository--><g id="link_JWTService_UserRepository"><path d="M1170,66.82 C1170,80.7 1170,98.16 1170,112.6 " fill="none" id="JWTService-to-UserRepository" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="1170,117.77,1174,108.77,1170,112.77,1166,108.77,1170,117.77" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="234" x="1041.5" y="96.8169">Obtiene el usuario a través del email</text></g><!--MD5=[9a002dcbbf96194f8cd26f70f5fd7816]
link UserRepository to UserDetailService--><g id="link_UserRepository_UserDetailService"><path d="M1233.37,140.5 C1304.33,140.5 1419.68,140.5 1491.65,140.5 " fill="none" id="UserRepository-to-UserDetailService" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="1496.76,140.5,1487.76,136.5,1491.76,140.5,1487.76,144.5,1496.76,140.5" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="202" x="1264" y="136.5669">Devuelve el usuario encontrado</text></g><!--MD5=[c29faf9eb479b412152ad5ebb3a8673f]
@startuml
left to right direction
actor Cliente
boundary "api/v1/users" as API
database UserRepository
control JWTAuthFilter
control JWTService
control UserDetailService

Cliente - -> API : Realiza una solicitud a /api/v1/users
API -> JWTAuthFilter : Intercepta la solicitud
JWTAuthFilter -> JWTService : Solicita el email del usuario del token
JWTService -> UserRepository : Obtiene el usuario a través del email
UserRepository - -> UserDetailService : Devuelve el usuario encontrado
JWTService - -> JWTAuthFilter : Devuelve el email del usuario
JWTAuthFilter - -> API : Devuelve el resultado de la solicitud
@enduml

PlantUML version 1.2022.7(Mon Aug 22 17:01:30 UTC 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>